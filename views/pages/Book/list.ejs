<%- include('../../partials/header.ejs', { activePage: 'books' }) %>
<main>
    <h1>Książki</h1>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Tytuł</th>
                <th>Autor</th>
                <th>Rok Publikacji</th>
                <th>Gatunek</th>
                <th>Akcje</th>
            </tr>
        </thead>
        <tbody>
        <% books.forEach(book => { %>
            <tr>
                <td><%= book.id_book%></td>
                <td><%= book.title %></td>
                <td><%= book.author %></td>
                <td><%= book.publication_year %></td>
                <td><%= book.genre %></td>
                <td>
                    <a href="/books/details/<%= book.id_book %>" class="details-button">Szczegóły</a>
                    <form action="/books/delete/<%= book.id_book %>" method="POST" style="display: inline;">
                        <button type="submit" class="delete-button">Usuń</button>
                    </form>
                </td>
            </tr>
        <% }) %>
        </tbody>
    </table>
    <% if (totalPages > 1) { %>
        <nav class="pagination">
            <% if (currentPage > 1) { %>
                <a href="/books?page=<%= currentPage - 1 %>">Poprzednia</a>
            <% } %>

            <% for (let i = 1; i <= totalPages; i++) { %>
                <a href="/books?page=<%= i %>" class="<%= i === currentPage ? 'active' : '' %>">
                    <%= i %>
                </a>
            <% } %>

            <% if (currentPage < totalPages) { %>
                <a href="/books?page=<%= currentPage + 1 %>">Następna</a>
            <% } %>
        </nav>
    <% } %>
    <a href="/books/add" class="submit-button">Dodaj Nową Książkę</a>
</main>
<%- include('../../partials/footer.ejs') %>



